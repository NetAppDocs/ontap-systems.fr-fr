---
permalink: asa-r2-a20-30-50/io-module-hotswap.html 
sidebar: sidebar 
keywords: asa a20, asa a30, asa a50, hot swap a cluster ha card, hot swap ethernet client io module, hotswap io module, hot swap io module 
summary: 'Vous pouvez remplacer à chaud un module d"E/S Ethernet dans votre système de stockage ASA A20, ASA A30 ou ASA A50 si un module tombe en panne et si votre système de stockage répond à toutes les exigences de version ONTAP.' 
---
= Remplacer à chaud un module d'E/S - ASA A20, ASA A30 et ASA A50
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Vous pouvez remplacer à chaud un module d'E/S Ethernet dans votre système de stockage ASA A20, ASA A30 ou ASA A50 si un module tombe en panne et si votre système de stockage répond à toutes les exigences de version ONTAP.

Pour remplacer à chaud un module d'E/S, assurez-vous que votre système de stockage répond aux exigences de version ONTAP, préparez votre système de stockage et le module d'E/S, remplacez à chaud le module défaillant, mettez le module de remplacement en ligne, rétablissez le fonctionnement normal du système de stockage et retournez le module défaillant à NetApp.

.Description de la tâche
* Le hot swap du module d'E/S signifie que vous n'avez pas besoin d'effectuer un basculement automatique avant de remplacer le module d'E/S défectueux.
* Appliquez les commandes au contrôleur et à l'emplacement d'E/S appropriés lorsque vous remplacez à chaud le module d'E/S :
+
** Le _contrôleur défectueux_ est le contrôleur sur lequel vous remplacez à chaud le module d'E/S.
** Le _contrôleur sain_ est le partenaire HA du contrôleur altéré.


* Vous pouvez activer les voyants bleus de localisation du système de stockage pour faciliter le repérage physique du système de stockage concerné. Connectez-vous au BMC via SSH et saisissez la commande  `system location-led _on_`.
+
Un système de stockage comporte trois voyants d'emplacement : un sur le panneau de commande et un sur chaque contrôleur. Les LED d'emplacement restent allumées pendant 30 minutes.

+
Vous pouvez les désactiver en entrant `system location-led _off_` la commande. Si vous n'êtes pas sûr que les LED soient allumées ou éteintes, vous pouvez vérifier leur état en entrant `system location-led show` la commande.





== Étape 1 : Assurez-vous que le système de stockage répond aux exigences de la procédure

Pour utiliser cette procédure, votre système de stockage doit exécuter ONTAP 9.17.1 ou une version ultérieure, et votre système de stockage doit répondre à toutes les exigences de la version de ONTAP que votre système de stockage exécute.


NOTE: Si votre système de stockage n'exécute pas ONTAP 9.17.1 ou une version ultérieure, ou ne répond pas à toutes les exigences de la version d'ONTAP exécutée par votre système de stockage, vous ne pouvez pas utiliser cette procédure, vous devez utiliser la link:io-module-replace.html["procédure de remplacement d'un module d'E/S"].

[role="tabbed-block"]
====
.ONTAP 9.17.1 ou 9.18.1RC
--
* Vous remplacez à chaud un module cluster et HA d'E/S défaillant dans l'emplacement 4 par un module d'E/S équivalent. Vous ne pouvez pas changer le type du module d'E/S.
* Le contrôleur présentant une défaillance du cluster et du module d'E/S HA (le contrôleur défaillant) doit déjà avoir pris le relais du contrôleur partenaire fonctionnel. Le basculement aurait dû se produire automatiquement si le module d'E/S a échoué.
+
Pour les clusters à deux nœuds, le système de stockage ne peut pas discerner quel contrôleur a le module d'E/S défaillant, donc l'un ou l'autre contrôleur peut initier le basculement. Le remplacement à chaud n'est pris en charge que lorsque le contrôleur avec le module d'E/S défaillant (le contrôleur défaillant) a pris le contrôle du contrôleur sain. Remplacer à chaud le module d'E/S est le seul moyen de récupérer sans interruption.

+
Vous pouvez vérifier que le contrôleur défaillant a pris le contrôle du contrôleur sain en entrant le  `storage failover show` commande.

+
Si vous n'êtes pas sûr du contrôleur dont le module d'E/S est défectueux, contactez  https://mysupport.netapp.com/site/global/dashboard["Support NetApp"] .

* La configuration de votre système de stockage doit comporter un seul cluster et un seul module d'E/S HA situés dans l'emplacement 4, et non deux clusters et deux modules d'E/S HA.
* Votre système de stockage doit être une configuration de cluster à deux nœuds (sans commutateur ou commuté).
* Tous les autres composants du système de stockage doivent fonctionner correctement ; dans le cas contraire, contactez https://mysupport.netapp.com/site/global/dashboard["Support NetApp"] avant de poursuivre cette procédure.


--
.ONTAP 9.18.1GA ou version ultérieure
--
* Vous remplacez à chaud un module d'E/S Ethernet dans n'importe quel emplacement ayant n'importe quelle combinaison de ports utilisés pour le cluster, la haute disponibilité et le client, par un module d'E/S équivalent. Vous ne pouvez pas changer le type du module d'E/S.
+
Les modules d'E/S Ethernet avec des ports utilisés pour le stockage ou MetroCluster ne sont pas remplaçables à chaud.

* Votre système de stockage (configuration de cluster sans commutateur ou avec commutateur) peut avoir n'importe quel nombre de nœuds pris en charge pour votre système de stockage.
* Tous les nœuds du cluster doivent exécuter la même version d'ONTAP (ONTAP 9.18.1GA ou ultérieure) ou différents niveaux de correctifs de la même version d'ONTAP.
+
Si les nœuds de votre cluster exécutent différentes versions d'ONTAP, il s'agit d'un cluster à versions mixtes et le remplacement à chaud d'un module d'E/S n'est pas pris en charge.



* Les contrôleurs de votre système de stockage peuvent se trouver dans l'un des états suivants :
+
** Les deux contrôleurs peuvent être opérationnels et exécuter des E/S (servir des données).
** L'un ou l'autre contrôleur peut être en état de prise de contrôle si la prise de contrôle a été provoquée par la défaillance du module d'E/S et si les contrôleurs fonctionnent par ailleurs correctement.
+
Dans certaines situations, ONTAP peut automatiquement effectuer un basculement de l’un ou l’autre contrôleur en raison du module d’E/S défaillant. Par exemple, si le module d’E/S défaillant contenait tous les ports du cluster (toutes les liaisons du cluster sur ce contrôleur sont hors service), ONTAP effectue automatiquement un basculement.





* Tous les autres composants du système de stockage doivent fonctionner correctement ; dans le cas contraire, contactez https://mysupport.netapp.com/site/global/dashboard["Support NetApp"] avant de poursuivre cette procédure.


--
====


== Étape 2 : Préparez le système de stockage et l’emplacement du module d’E/S

Préparez le système de stockage et l'emplacement du module d'E/S afin qu'il soit sûr de retirer le module d'E/S défectueux :

.Étapes
. Mettez-vous à la terre.
. Débranchez les câbles du module d'E/S défectueux.
+
Veillez à étiqueter les câbles afin de pouvoir les reconnecter aux mêmes ports plus tard dans cette procédure.

+
[NOTE]
====
Le module d'E/S devrait être défaillant (les ports devraient être en état de liaison désactivée) ; cependant, si les liaisons sont toujours actives et qu'elles contiennent le dernier port de cluster fonctionnel, le débranchement des câbles déclenche un basculement automatique.

Attendez cinq minutes après avoir débranché les câbles pour vous assurer que tous les basculements automatiques ou les basculements LIF sont terminés avant de poursuivre cette procédure.

====
. Si AutoSupport est activé, supprimez la création automatique de dossier en invoquant un message AutoSupport :
+
`system node autosupport invoke -node * -type all -message MAINT=<number of hours down>h`

+
Par exemple, le message AutoSupport suivant supprime la création automatique de cas pendant deux heures :

+
`node2::> system node autosupport invoke -node * -type all -message MAINT=2h`

. En fonction de la version d'ONTAP exécutée par votre système de stockage et de l'état des contrôleurs, désactivez la restitution automatique :
+
[cols="1,2,3"]
|===
| Version ONTAP | Si... | Alors... 


 a| 
9.17.1 ou 9.18.1RC
 a| 
Si le contrôleur défaillant a pris automatiquement le relais du contrôleur sain
 a| 
Désactiver le retour automatique :

.. Saisissez la commande suivante depuis la console du contrôleur défectueux
+
`storage failover modify -node local -auto-giveback false`

.. Entrer `y` lorsque vous voyez l'invite _Voulez-vous désactiver le retour automatique ?_




 a| 
9.18.1GA ou version ultérieure
 a| 
Si l'un des contrôleurs a pris le contrôle de son partenaire automatiquement
 a| 
Désactiver le retour automatique :

.. Saisissez la commande suivante depuis la console du contrôleur qui a pris le contrôle de son partenaire :
+
`storage failover modify -node local -auto-giveback false`

.. Entrer `y` lorsque vous voyez l'invite _Voulez-vous désactiver le retour automatique ?_




 a| 
9.18.1GA ou version ultérieure
 a| 
Les deux contrôleurs sont opérationnels et traitent des E/S (fournissent des données)
 a| 
Passez à l'étape suivante.

|===
. Préparez le module d'E/S défectueux en vue de son retrait en le mettant hors service et en le coupant de l'alimentation :
+
.. Entrez la commande suivante :
+
`system controller slot module remove -node _impaired_node_name_ -slot _slot_number_`

.. Entrer `y` lorsque vous voyez l'invite _Voulez-vous continuer ?_
+
Par exemple, la commande suivante prépare le module défaillant dans l'emplacement 4 sur le nœud 2 (le contrôleur défectueux) pour le retrait, et affiche un message indiquant qu'il est sûr de le retirer :

+
[listing]
----
node2::> system controller slot module remove -node node2 -slot 4

Warning: IO_2X_100GBE_NVDA_NIC module in slot 4 of node node2 will be powered off for removal.

Do you want to continue? {y|n}: y

The module has been successfully removed from service and powered off. It can now be safely removed.
----


. Vérifiez que le module d'E/S défectueux est hors tension :
+
`system controller slot module show`

+
Le résultat doit afficher  `_powered-off_` dans la  `_status_` colonne pour le module défaillant et son numéro d'emplacement.





== Étape 3 : remplacer à chaud le module d’E/S défectueux

Remplacez à chaud le module d'E/S défectueux par un module d'E/S équivalent :

.Étapes
. Si vous n'êtes pas déjà mis à la terre, mettez-vous à la terre correctement.
. Retirez le module d'E/S défectueux du contrôleur défaillant :
+
image::../media/drw_g_io_module_hotswap_slot4_ieops-2366.svg[cluster hotswap et module d'E/S ha dans l'emplacement 4]

+
[cols="1,4"]
|===


 a| 
image::../media/icon_round_1.png[Légende numéro 1]
 a| 
Tournez la vis moletée du module d'E/S dans le sens inverse des aiguilles d'une montre pour la desserrer.



 a| 
image::../media/icon_round_2.png[Légende numéro 2]
 a| 
Retirez le module d'E/S du contrôleur à l'aide de la languette d'étiquette du port à gauche et de la vis moletée à droite.

|===
. Installez le module d'E/S de remplacement :
+
.. Alignez le module d'E/S sur les bords du logement.
.. Poussez doucement le module d'E/S jusqu'au bout dans la fente, en veillant à bien insérer le module d'E/S dans le connecteur.
+
Vous pouvez utiliser la languette à gauche et la vis à oreilles à droite pour enfoncer le module d'E/S.

.. Tournez la vis à molette dans le sens des aiguilles d'une montre pour la serrer.


. Câblez le module d'E/S de remplacement.




== Étape 4 : Mettez le module d’E/S de remplacement en ligne

Mettez en ligne le module d'E/S de remplacement, vérifiez que les ports du module d'E/S ont été initialisés avec succès, vérifiez que l'emplacement est alimenté, puis vérifiez que le module d'E/S est en ligne et reconnu.

.Description de la tâche
Après le remplacement du module d'E/S et le retour des ports à un état sain, les LIF sont réattribuées au module d'E/S remplacé.

.Étapes
. Mettez en service le module d'E/S de remplacement :
+
.. Entrez la commande suivante :
+
`system controller slot module insert -node _impaired_node_name_ -slot _slot_number_`

.. Entrer `y` lorsque vous voyez l'invite, _Voulez-vous continuer ?_
+
Le résultat doit confirmer que le module d'E/S a été mis en ligne avec succès (allumé, initialisé et mis en service).

+
Par exemple, la commande suivante met en ligne l'emplacement 4 du nœud 2 (le contrôleur altéré) et affiche un message indiquant que le processus a réussi :

+
[listing]
----
node2::> system controller slot module insert -node node2 -slot 4

Warning: IO_2X_100GBE_NVDA_NIC module in slot 4 of node node2 will be powered on and initialized.

Do you want to continue? {y|n}: `y`

The module has been successfully powered on, initialized and placed into service.
----


. Vérifiez que chaque port du module d'E/S a été initialisé avec succès :
+
.. Entrez la commande suivante depuis la console du contrôleur défaillant :
+
`event log show -event \*hotplug.init*`

+

NOTE: La mise à jour du firmware requise et l'initialisation des ports peuvent prendre plusieurs minutes.

+
La sortie doit afficher un ou plusieurs événements EMS hotplug.init.success indiquant que chaque port sur le module d'E/S a été initialisé avec succès.

+
Par exemple, le résultat suivant montre que l'initialisation a réussi pour les ports d'E/S e4b et e4a :

+
[listing]
----
node2::> event log show -event *hotplug.init*

Time                Node             Severity      Event

------------------- ---------------- ------------- ---------------------------

7/11/2025 16:04:06  node2      NOTICE        hotplug.init.success: Initialization of ports "e4b" in slot 4 succeeded

7/11/2025 16:04:06  node2      NOTICE        hotplug.init.success: Initialization of ports "e4a" in slot 4 succeeded

2 entries were displayed.
----
.. Si l'initialisation du port échoue, consultez le journal EMS pour les prochaines étapes à suivre.


. Vérifiez que l'emplacement du module d'E/S est alimenté et prêt à fonctionner :
+
`system controller slot module show`

+
La sortie doit indiquer que l'état de l'emplacement est  `_powered-on_` et donc prêt pour le fonctionnement du module d'E/S.

. Vérifiez que le module d'E/S est en ligne et reconnu.
+
Entrez la commande depuis la console du contrôleur défaillant :

+
`system controller config show -node local -slot _slot_number_`

+
Si le module d'E/S a été mis en ligne avec succès et est reconnu, la sortie affiche les informations du module d'E/S, y compris les informations de port pour le slot.

+
Par exemple, vous devriez obtenir un résultat similaire à celui-ci pour un module d'E/S dans l'emplacement 4 :

+
[listing]
----
node2::> system controller config show -node local -slot 4

Node: node2
Sub- Device/
Slot slot Information
---- ---- -----------------------------
   4    - Dual 40G/100G Ethernet Controller CX6-DX
                  e4a MAC Address: d0:39:ea:59:69:74 (auto-100g_cr4-fd-up)
                          QSFP Vendor:        CISCO-BIZLINK
                          QSFP Part Number:   L45593-D218-D10
                          QSFP Serial Number: LCC2807GJFM-B
                  e4b MAC Address: d0:39:ea:59:69:75 (auto-100g_cr4-fd-up)
                          QSFP Vendor:        CISCO-BIZLINK
                          QSFP Part Number:   L45593-D218-D10
                          QSFP Serial Number: LCC2809G26F-A
                  Device Type:        CX6-DX PSID(NAP0000000027)
                  Firmware Version:   22.44.1700
                  Part Number:        111-05341
                  Hardware Revision:  20
                  Serial Number:      032403001370
----




== Étape 5 : Restaurer le système de stockage à son fonctionnement normal

Rétablissez le fonctionnement normal de votre système de stockage en restituant le stockage au contrôleur qui a été pris en charge (si nécessaire), en rétablissant la restitution automatique (si nécessaire), en vérifiant que les LIF sont sur leurs ports d'origine, et en réactivant la création automatique de dossiers AutoSupport.

.Étapes
. En fonction de la version d'ONTAP exécutée par votre système de stockage et de l'état des contrôleurs, restituez le stockage et rétablissez la restitution automatique sur le contrôleur qui a été pris en charge :
+
[cols="1,2,3"]
|===
| Version ONTAP | Si... | Alors... 


 a| 
9.17.1 ou 9.18.1RC
 a| 
Si le contrôleur défaillant a pris automatiquement le relais du contrôleur sain
 a| 
.. Rétablissez le contrôleur sain à un fonctionnement normal en lui rendant son stockage :
+
`storage failover giveback -ofnode _healthy_node_name_`

.. Rétablir la restitution automatique depuis la console du contrôleur défectueux :
+
`storage failover modify -node local -auto-giveback _true_`





 a| 
9.18.1GA ou version ultérieure
 a| 
Si l'un des contrôleurs a pris le contrôle de son partenaire automatiquement
 a| 
.. Rendez le contrôleur qui avait été pris en charge à un fonctionnement normal en lui rendant son stockage :
+
`storage failover giveback -ofnode _controller that was taken over_name_`

.. Rétablir la restitution automatique depuis la console du contrôleur qui a été pris en charge :
+
`storage failover modify -node local -auto-giveback _true_`





 a| 
9.18.1GA ou version ultérieure
 a| 
Les deux contrôleurs sont opérationnels et traitent des E/S (fournissent des données)
 a| 
Passez à l'étape suivante.

|===
. Vérifiez que les interfaces logiques sont bien placées sur leur serveur domestique et leurs ports : `network interface show -is-home false`
+
Si des LIFs sont répertoriées comme faux, restaurez-les sur leurs ports de home port : `network interface revert -vserver * -lif *`

. Si AutoSupport est activé, restaurez la création automatique de dossiers :
+
`system node autosupport invoke -node * -type all -message MAINT=end`





== Étape 6 : renvoyer la pièce défaillante à NetApp

Retournez la pièce défectueuse à NetApp, tel que décrit dans les instructions RMA (retour de matériel) fournies avec le kit. Voir la https://mysupport.netapp.com/site/info/rma["Retour de pièces et remplacements"] page pour plus d'informations.
